@page "/stocks"

@using Dashboard.BlazorApp.Models

@inject IDialogService DialogService

@inject NavigationManager Navigation

<h3>Stocks</h3>

<div>
    <p>Is connected: @_isConnected</p>
</div>

<br />
<br />

<div style="display: table; table-layout: fixed; width: 100%;">
    <div style="overflow-x: auto;">
        <FluentDataGrid @ref=dataGrid
                        TGridItem=StockModel
                        Items="@_stocks"
                        Virtualize=true
                        ShowHover=true
                        Style="width: 100%;"
                        DisplayMode="DataGridDisplayMode.Table"
                        RowSize="@DataGridRowSize.Medium"
                        OnCellFocus="OnCellFocused">
            <PropertyColumn Property="@(p => p.UpdatedAt)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.Symbol)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.DayOpen)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.DayHigh)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.DayHigh)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.DayLow)" Sortable="true" Class="flash-on-update" />
            <TemplateColumn Title="LastChange" @ref=templateColumn>
                <FluentNumberField Name=@($"lastChangeNumberField-{context.Symbol}") @bind-Value="@context!.LastChange" MaxLength="12" UseTypeConstraints/>
            </TemplateColumn>
            <PropertyColumn Property="@(p => p.Change)" Sortable="true" Class="flash-on-update" />
            <PropertyColumn Property="@(p => p.PercentChange)" Sortable="true" Class="flash-on-update" />
        </FluentDataGrid>

    </div>
</div>
